# VideoMeet Server

–ë—ç–∫–µ–Ω–¥ –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –≤–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π WebRTC, —á–∞—Ç–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–Ω–∞—Ç–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Bun** - –±—ã—Å—Ç—Ä—ã–π JavaScript runtime
- **Node.js** + **TypeScript**
- **Express** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Socket.io** - WebSocket –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **Prisma ORM** - —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Redis** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–æ–º–Ω–∞—Ç
- **Passport JWT** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **Argon2** - —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- **Swagger** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- **WebRTC** - peer-to-peer –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –ú–æ–¥—É–ª–∏ API:

- ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, –≤—ã—Ö–æ–¥ —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏
- ‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ **–ö–æ–º–Ω–∞—Ç—ã** - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è–º–∏
- ‚úÖ **WebRTC Signaling** - –æ–±–º–µ–Ω SDP offers/answers –∏ ICE candidates
- ‚úÖ **–ß–∞—Ç** - —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞** - –∫–æ–Ω—Ç—Ä–æ–ª—å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞, –∫–∞–º–µ—Ä—ã –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —ç–∫—Ä–∞–Ω–∞
- ‚úÖ **–ü—Ä–∞–≤–∞ —Ö–æ—Å—Ç–∞** - —É–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –ø—Ä–∞–≤

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- üîê JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å refresh —Ç–æ–∫–µ–Ω–∞–º–∏
- üë• –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å (ADMIN, USER, GUEST)
- üé• WebRTC peer-to-peer –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ
- üí¨ –ß–∞—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üî¥ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–æ–º–Ω–∞—Ç —á–µ—Ä–µ–∑ Redis
- üõ°Ô∏è –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å Zod
- üìä Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Winston)
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ—è—Ö
- üé¨ TURN —Å–µ—Ä–≤–µ—Ä –¥–ª—è NAT traversal

## üèÅ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Bun >= 1.2.21 –∏–ª–∏ Node.js >= 20
- PostgreSQL >= 14
- Redis >= 7 (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è production)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:**

```bash
git clone <repository-url>
cd video-service/server
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**

```bash
bun install
# –∏–ª–∏
npm install
```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏.

4. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma Client:**

```bash
bun run prisma:generate
```

5. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π:**

```bash
bun run prisma:migrate
```

6. **–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ë–î —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:**

```bash
bun run prisma:seed
```

7. **–ó–∞–ø—É—Å–∫ Redis:**

```bash
# macOS/Linux
redis-server

# Windows
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redis –∏–∑ Docker –∏–ª–∏ WSL
```

8. **–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞:**

```bash
bun run dev
# –∏–ª–∏
npm run dev
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:3000`

## üê≥ Docker

–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose:

```bash
docker-compose up -d
```

–≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–Ω–∏–º–µ—Ç:

- PostgreSQL
- PgAdmin (http://localhost:5050)
- Application

## üìñ API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:

**Swagger UI:** http://localhost:3000/api-docs

### –¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã

**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:**

- Email: `admin@example.com`
- Password: `Admin@12345`

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**

- Email: `user@example.com`
- Password: `User@12345`

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ config/          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (DB, JWT, Swagger, etc.)
‚îú‚îÄ‚îÄ database/        # Prisma client –∏ seeds
‚îú‚îÄ‚îÄ middlewares/     # Express middlewares
‚îú‚îÄ‚îÄ modules/         # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (controllers, services, repositories)
‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îú‚îÄ‚îÄ users/
‚îÇ   ‚îú‚îÄ‚îÄ categories/
‚îÇ   ‚îú‚îÄ‚îÄ products/
‚îÇ   ‚îú‚îÄ‚îÄ orders/
‚îÇ   ‚îú‚îÄ‚îÄ reviews/
‚îÇ   ‚îî‚îÄ‚îÄ analytics/
‚îú‚îÄ‚îÄ shared/          # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ utils/           # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ app.ts           # Express application
‚îî‚îÄ‚îÄ server.ts        # Entry point
```

## üîß NPM Scripts

```bash
npm run dev              # –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run prisma:generate  # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma Client
npm run prisma:migrate   # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
npm run prisma:seed      # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ë–î —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run prisma:studio    # Prisma Studio
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```bash
POST /api/auth/login
Content-Type: application/json

{
  "email": "admin@example.com",
  "password": "Admin@12345"
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤

```bash
GET /api/products?page=1&limit=10&search=iphone
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞

```bash
POST /api/orders
Authorization: Bearer <token>
Content-Type: application/json

{
  "items": [
    {
      "productId": "...",
      "quantity": 2
    }
  ]
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ Argon2 –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
- ‚úÖ Helmet –¥–ª—è –∑–∞—â–∏—Ç—ã HTTP –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ Rate limiting
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Prisma ORM —Å PostgreSQL. –°—Ö–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç:

- **User** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- **Category** - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏)
- **Product** - —Ç–æ–≤–∞—Ä—ã
- **Order** - –∑–∞–∫–∞–∑—ã
- **OrderItem** - –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–∞
- **Review** - –æ—Ç–∑—ã–≤—ã

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

Contributions, issues –∏ feature requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## üë§ –ê–≤—Ç–æ—Ä

**Artyom**

- GitHub: [@artyom-develop](https://github.com/artyom-develop)
