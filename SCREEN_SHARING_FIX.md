# Screen Sharing –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

## –î–∞—Ç–∞: 16 —Ñ–µ–≤—Ä–∞–ª—è 2026

### –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ –≥–æ—Å—Ç–∏ –Ω–µ –º–æ–≥—É—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —ç–∫—Ä–∞–Ω, —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –∫–æ–º–Ω–∞—Ç—ã.

### –ê–Ω–∞–ª–∏–∑
–ü–æ—Å–ª–µ —Ç—â–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è –∫–æ–¥–∞ –≤—ã—è—Å–Ω–∏–ª–æ—Å—å, —á—Ç–æ **–ù–ï–¢ –ù–ò–ö–ê–ö–ò–• –û–ì–†–ê–ù–ò–ß–ï–ù–ò–ô** –Ω–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é —ç–∫—Ä–∞–Ω–∞ –≤ –∫–æ–¥–µ. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –∫–æ–º–Ω–∞—Ç—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–æ–ª–∏ (—Ö–æ—Å—Ç/–≥–æ—Å—Ç—å).

### –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã
–ü—Ä–æ–±–ª–µ–º–∞ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —Å–≤—è–∑–∞–Ω–∞ —Å:
1. **–ë—Ä–∞—É–∑–µ—Ä–Ω—ã–º–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏** - –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã —Ç—Ä–µ–±—É—é—Ç —è–≤–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è getDisplayMedia()
2. **–û—à–∏–±–∫–∏ WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** - –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ–¥–∞—á–µ–π screen share —Ç—Ä–µ–∫–æ–≤
3. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –±—ã–ª–æ —Å–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

#### 1. –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (client)
**–§–∞–π–ª:** `client/src/store/mediaStore.ts`
- –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ screen share
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (userId, isHost, displayName)
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏:
  - `NotAllowedError` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫–ª–æ–Ω–∏–ª —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
  - `NotFoundError` - –Ω–µ –Ω–∞–π–¥–µ–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
  - `NotSupportedError` - –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç
- –î–æ–±–∞–≤–ª–µ–Ω toast —Å —É—Å–ø–µ—à–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º

**–§–∞–π–ª:** `client/src/components/room/Controls.tsx`
- –î–æ–±–∞–≤–ª–µ–Ω —è–≤–Ω—ã–π –ª–æ–≥ "–¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤"
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

#### 2. –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (server)
**–§–∞–π–ª:** `server/src/socket/handlers/media.handler.ts`
- –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π "–î–æ—Å—Ç—É–ø–Ω–æ –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –∫–æ–º–Ω–∞—Ç—ã"
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π room:error

#### 3. –£–ª—É—á—à–µ–Ω –≤—ã–∑–æ–≤ getDisplayMedia
- –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `displaySurface` –¥–ª—è –±–æ–ª–µ–µ —à–∏—Ä–æ–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- –†–∞—Å—à–∏—Ä–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã video

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —á—Ç–æ screen sharing —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –í–æ–π–¥–∏—Ç–µ –≤ –∫–æ–º–Ω–∞—Ç—É –∫–∞–∫ –≥–æ—Å—Ç—å (–Ω–µ —Ö–æ—Å—Ç)
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —ç–∫—Ä–∞–Ω–æ–º"
4. –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
   ```
   [Controls] Starting screen share - –¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
   [mediaStore] Requesting screen share access...
   [mediaStore] Updating localParticipant screenSharing: true { userId: '...', isHost: false, displayName: '...' }
   ```
5. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ –ª–æ–≥–∞—Ö:
   ```
   User xxx (Display Name) is starting screen sharing in room yyy
   Updated participant xxx screenSharing state to: true
   Screen sharing state broadcasted to room yyy
   ```

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

#### 1. –ë—Ä–∞—É–∑–µ—Ä
- **Chrome/Edge:** –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –ø—Ä–æ–±–ª–µ–º
- **Firefox:** –¢—Ä–µ–±—É–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–≠–∫—Ä–∞–Ω"
- **Safari:** –ú–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### 2. HTTPS
- Screen sharing —Ä–∞–±–æ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ HTTPS –∏–ª–∏ localhost
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ https:// –∏–ª–∏ localhost

#### 3. WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –ï—Å–ª–∏ –≤–∏–¥–µ–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ screen share –Ω–µ—Ç - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ WebRTC
- –í–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ —Å renegotiation

#### 4. –§–∞–π—Ä–≤–æ–ª/VPN
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ–∞–π—Ä–≤–æ–ª—ã –±–ª–æ–∫–∏—Ä—É—é—Ç getDisplayMedia()
- VPN –º–æ–∂–µ—Ç –º–µ—à–∞—Ç—å WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

**–î–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (—Ö–æ—Å—Ç –∏ –≥–æ—Å—Ç–∏):**
1. –í –∫–æ–º–Ω–∞—Ç–µ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —Å –∏–∫–æ–Ω–∫–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∞ (üì∫)
2. –í—ã–±–µ—Ä–∏—Ç–µ —á—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å: –≤–µ—Å—å —ç–∫—Ä–∞–Ω, –æ–∫–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –≤–∫–ª–∞–¥–∫—É –±—Ä–∞—É–∑–µ—Ä–∞
3. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"
4. –í–∞—à —ç–∫—Ä–∞–Ω —Ç–µ–ø–µ—Ä—å –≤–∏–¥–∏—Ç –≤—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏
5. –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∂–º–∏—Ç–µ —Ç—É –∂–µ –∫–Ω–æ–ø–∫—É –∏–ª–∏ "–ü—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é" –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### –ö–æ–¥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

–ù–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ `isHost` –¥–ª—è screen sharing –≤ –∫–æ–¥–µ:
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –≤–∏–¥–Ω–∞ –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º
- ‚úÖ handleToggleScreen –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö
- ‚úÖ –°–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- ‚úÖ WebRTC –ø–µ—Ä–µ–¥–∞–µ—Ç screen share —Ç—Ä–µ–∫–∏ –≤—Å–µ–º

**Screen sharing –¥–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∂–¥–æ–º—É —É—á–∞—Å—Ç–Ω–∏–∫—É –∫–æ–º–Ω–∞—Ç—ã.**
