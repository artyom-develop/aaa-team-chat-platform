useSocket.ts:242 [useSocket] Leaving room and stopping media streams
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '2f9fd478-acab-43d7-a55a-6d4f6f47a22e', remoteParticipantsCount: 0, totalParticipants: 1}
VideoGrid.tsx:38 [VideoGrid] All participants: [{…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '2f9fd478-acab-43d7-a55a-6d4f6f47a22e', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
useWebRTC.ts:468 [useWebRTC] Not creating offers - room: true localStream: false
RoomPage.tsx:196 [RoomPage] Cleaning up - clearing room state and stopping media streams
api.ts:39 [apiService] setToken called with: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImE3YWZjMzJkLTNkMjYtNDIyYS1iZjI0LTBmMWJiZTM1ZWZmNCIsImVtYWlsIjoiZ3Vlc3QtMzAwNWYxYjgtNTIwZS00ZWNlLWI1OGEtNWRkZmY4ZmIwNjk5QHZpZGVvbWVldC5sb2NhbCIsInJvbGUiOiJVU0VSIiwidG9rZW5WZXJzaW9uIjowLCJpYXQiOjE3NzE1MTk2MTIsImV4cCI6MTc3MTUyMDUxMn0.z-5wKH66rWX32oY2jVeOm5xT1JJT4f28rc_dhLrwOVQ
api.ts:58 [apiService] Request interceptor - token: present
HomePage.tsx:47 Creating room with token: present
api.ts:58 [apiService] Request interceptor - token: present
authStore.ts:174 [authStore] Auth check successful
api.ts:162 [apiService] createRoom response: {success: true, data: {…}, message: 'Комната успешно создана'}
ProtectedRoute.tsx:20 [ProtectedRoute] isAuthenticated: true isLoading: false user: {id: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', email: 'guest-3005f1b8-520e-4ece-b58a-5ddff8fb0699@videomeet.local', avatarUrl: null, role: 'USER', …}
api.ts:58 [apiService] Request interceptor - token: present
LobbyPage.tsx:43 [LobbyPage] Re-enabling media, keeping previous settings: {audioEnabled: true, videoEnabled: true}
mediaStore.ts:138 [mediaStore] Setting new local stream: a5f0ada2-3871-4909-bdc3-17417daeed6c
mediaStore.ts:146 [mediaStore] Applying enabled state to stream tracks: {audioEnabled: true, videoEnabled: true, audioTracks: 1, videoTracks: 1}
mediaStore.ts:154 [mediaStore] Setting audio track enabled: {trackId: 'ca9d6104-5fe4-4861-90d7-8429a33d757a', enabled: true, prevEnabled: true}
mediaStore.ts:163 [mediaStore] Setting video track enabled: {trackId: '135b0eca-ba22-45c3-a052-eb260dac27ef', label: 'USB2.0 HD UVC WebCam (2b7e:b685)', enabled: true, prevEnabled: true}
mediaStore.ts:172 [mediaStore] Stream tracks configured with enabled state
LobbyPage.tsx:58 [LobbyPage] Local stream initialized: a5f0ada2-3871-4909-bdc3-17417daeed6c
LobbyPage.tsx:96 [LobbyPage] Attaching stream to video element
LobbyPage.tsx:122 [LobbyPage] Joining room, current stream: a5f0ada2-3871-4909-bdc3-17417daeed6c
ProtectedRoute.tsx:20 [ProtectedRoute] isAuthenticated: true isLoading: false user: {id: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', email: 'guest-3005f1b8-520e-4ece-b58a-5ddff8fb0699@videomeet.local', avatarUrl: null, role: 'USER', …}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
useSocket.ts:32 [useSocket] Setting up event listeners. Room: undefined User: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useWebRTC.ts:468 [useWebRTC] Not creating offers - room: false localStream: true
RoomPage.tsx:64 [RoomPage] Loading room data for slug: 59aa-0422-9bab
RoomPage.tsx:165 [RoomPage] Waiting for room:joined event to create localParticipant
api.ts:58 [apiService] Request interceptor - token: present
api.ts:58 [apiService] Request interceptor - token: present
RoomPage.tsx:68 [RoomPage] Room data loaded: {id: '67253170-b011-482f-9cc4-3808f07e6fce', slug: '59aa-0422-9bab', name: 'афываыфав', hasLobby: false, maxParticipants: 50, …}
RoomPage.tsx:73 [RoomPage] Current media stream state: {hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoTracks: 1, audioTracks: 1}
RoomPage.tsx:107 [RoomPage] Using existing media stream: a5f0ada2-3871-4909-bdc3-17417daeed6c
RoomPage.tsx:110 [RoomPage] Joining room via socket...
RoomPage.tsx:115 [RoomPage] LocalStream ready, joining room with media: {streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoTracks: 1, audioTracks: 1}
useSocket.ts:220 [useSocket] joinRoom called for: 59aa-0422-9bab {audioEnabled: true, videoEnabled: true, isMuted: false, isCameraOff: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 0, existingConnectionsCount: 0}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
api.ts:58 [apiService] Request interceptor - token: present
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: true}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 0, existingConnectionsCount: 0}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useSocket.ts:228 [useSocket] joinRoom callback response: {success: true}
RoomPage.tsx:127 [RoomPage] Successfully joined room
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: true}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: false, localParticipantStream: undefined, remoteParticipantsCount: 0, totalParticipants: 0}
VideoGrid.tsx:38 [VideoGrid] All participants: []
useSocket.ts:32 [useSocket] Setting up event listeners. Room: 59aa-0422-9bab User: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 0, existingConnectionsCount: 0}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: true}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: false, localParticipantStream: undefined, remoteParticipantsCount: 0, totalParticipants: 0}
VideoGrid.tsx:38 [VideoGrid] All participants: []
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 0, existingConnectionsCount: 0}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '59aa-0422-9bab', participants: Array(1)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:59 [useSocket] Processing participants: 1
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', audioEnabled: true, videoEnabled: true, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: true}
useSocket.ts:123 [useSocket] Participants added. Total: 0
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '59aa-0422-9bab', participants: Array(1)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:59 [useSocket] Processing participants: 1
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', audioEnabled: true, videoEnabled: true, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: true}
useSocket.ts:123 [useSocket] Participants added. Total: 0
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: true}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 0, totalParticipants: 1}
VideoGrid.tsx:38 [VideoGrid] All participants: [{…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:39 [VideoTile] Attaching stream to video element: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoTracks: 1, audioTracks: 1}
VideoTile.tsx:56 [VideoTile] Video track state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', trackEnabled: true, trackReadyState: 'live', participantVideoEnabled: true}
VideoTile.tsx:67 [VideoTile] Audio track state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', trackEnabled: true, trackReadyState: 'live'}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 0, existingConnectionsCount: 0}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useSocket.ts:152 [useSocket] Request to create offers for participants: [{…}]
useSocket.ts:152 [useSocket] Request to create offers for participants: [{…}]
RoomPage.tsx:45 [RoomPage] Using default ICE servers from config
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: true}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 0, totalParticipants: 1}
VideoGrid.tsx:38 [VideoGrid] All participants: [{…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 0, existingConnectionsCount: 0}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useChat.ts:35 [useChat] Loaded history for room: 59aa-0422-9bab messages: 0
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 0, totalParticipants: 1}
VideoGrid.tsx:38 [VideoGrid] All participants: [{…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 0, existingConnectionsCount: 0}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useSocket.ts:130 [useSocket] User joined: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', avatarUrl: null, isMuted: true, isCameraOff: true, …}
useSocket.ts:130 [useSocket] User joined: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', avatarUrl: null, isMuted: true, isCameraOff: true, …}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
VideoTile.tsx:74 [VideoTile] No stream available: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasVideoRef: true}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 1, existingConnectionsCount: 0}
useWebRTC.ts:494 [useWebRTC] Creating offer for new participant: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:268 [useWebRTC] Creating offer for user: ec4ca0fd-dbec-4535-84c3-2623a18282cf {hasLocalStream: true, localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', hasRoom: true}
useWebRTC.ts:55 [useWebRTC] Creating new peer connection for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {hasLocalStream: true, localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoTracks: 1, audioTracks: 1}
useWebRTC.ts:66 [useWebRTC] Adding local tracks to peer connection: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', tracksCount: 2}
useWebRTC.ts:72 [useWebRTC] Adding track: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', trackKind: 'audio', trackId: 'ca9d6104-5fe4-4861-90d7-8429a33d757a', trackEnabled: true, trackReadyState: 'live'}
useWebRTC.ts:72 [useWebRTC] Adding track: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', trackKind: 'video', trackId: '135b0eca-ba22-45c3-a052-eb260dac27ef', trackEnabled: true, trackReadyState: 'live'}
useWebRTC.ts:81 [useWebRTC] Added local tracks to peer connection for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:283 [useWebRTC] Peer connection senders before offer: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', sendersCount: 2, senders: Array(2)}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:296 [useWebRTC] Offer created: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', type: 'offer', hasVideo: true, hasAudio: true, sdpLines: 178}
useWebRTC.ts:309 [useWebRTC] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 59aa-0422-9bab
useWebRTC.ts:231 [useWebRTC] ICE gathering state for ec4ca0fd-dbec-4535-84c3-2623a18282cf: gathering
useSocket.ts:130 [useSocket] User joined: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', avatarUrl: null, isMuted: false, isCameraOff: false, …}
useSocket.ts:130 [useSocket] User joined: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', avatarUrl: null, isMuted: false, isCameraOff: false, …}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'new', iceConnectionState: 'new'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useSocket.ts:130 [useSocket] User joined: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', avatarUrl: null, isMuted: false, isCameraOff: false, …}
useSocket.ts:130 [useSocket] User joined: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', avatarUrl: null, isMuted: false, isCameraOff: false, …}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'new', iceConnectionState: 'new'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:164 [useWebRTC] ICE connection state for ec4ca0fd-dbec-4535-84c3-2623a18282cf: checking
useWebRTC.ts:122 [useWebRTC] PeerConnection state for ec4ca0fd-dbec-4535-84c3-2623a18282cf: connecting
useWebRTC.ts:164 [useWebRTC] ICE connection state for ec4ca0fd-dbec-4535-84c3-2623a18282cf: connected
useWebRTC.ts:191 [useWebRTC] ICE connection established for ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:414 [useWebRTC] Answer processed successfully from: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:441 [useWebRTC] ICE candidate added from: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:231 [useWebRTC] ICE gathering state for ec4ca0fd-dbec-4535-84c3-2623a18282cf: complete
useWebRTC.ts:122 [useWebRTC] PeerConnection state for ec4ca0fd-dbec-4535-84c3-2623a18282cf: connected
useWebRTC.ts:125 [useWebRTC] Successfully connected to ec4ca0fd-dbec-4535-84c3-2623a18282cf
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
VideoTile.tsx:39 [VideoTile] Attaching stream to video element: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoTracks: 1, audioTracks: 1}
VideoTile.tsx:56 [VideoTile] Video track state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', trackEnabled: true, trackReadyState: 'live', participantVideoEnabled: true}
VideoTile.tsx:67 [VideoTile] Audio track state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', trackEnabled: true, trackReadyState: 'live'}
VideoTile.tsx:74 [VideoTile] No stream available: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasVideoRef: true}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
VideoTile.tsx:39 [VideoTile] Attaching stream to video element: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoTracks: 1, audioTracks: 1}
VideoTile.tsx:56 [VideoTile] Video track state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', trackEnabled: true, trackReadyState: 'live', participantVideoEnabled: true}
VideoTile.tsx:67 [VideoTile] Audio track state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', trackEnabled: true, trackReadyState: 'live'}
VideoTile.tsx:74 [VideoTile] No stream available: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasVideoRef: true}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
VideoTile.tsx:39 [VideoTile] Attaching stream to video element: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoTracks: 1, audioTracks: 1}
VideoTile.tsx:56 [VideoTile] Video track state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', trackEnabled: true, trackReadyState: 'live', participantVideoEnabled: true}
VideoTile.tsx:67 [VideoTile] Audio track state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', trackEnabled: true, trackReadyState: 'live'}
VideoTile.tsx:74 [VideoTile] No stream available: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasVideoRef: true}
Controls.tsx:58 [Controls] Toggling video: {oldValue: true, newValue: false}
mediaStore.ts:229 [mediaStore] toggleVideo: {from: true, to: false, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoTracksCount: 1}
mediaStore.ts:237 [mediaStore] Setting video track enabled: {trackId: '135b0eca-ba22-45c3-a052-eb260dac27ef', label: 'USB2.0 HD UVC WebCam (2b7e:b685)', enabled: false, readyState: 'live'}
socket.ts:150 [SocketService] toggleCamera: {roomSlug: '59aa-0422-9bab', isCameraOff: true}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
RoomPage.tsx:64 [RoomPage] Loading room data for slug: 59aa-0422-9bab
RoomPage.tsx:177 [RoomPage] Updating local participant: {streamChanged: false, audioChanged: false, videoChanged: true, screenChanged: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
api.ts:58 [apiService] Request interceptor - token: present
mediaStore.ts:259 [mediaStore] Updating localParticipant videoEnabled: false
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:615 [useWebRTC] Stream update triggered, renegotiating all connections
useWebRTC.ts:632 [useWebRTC] Renegotiating connection for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', roomSlug: '59aa-0422-9bab', isCameraOff: true}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', roomSlug: '59aa-0422-9bab', isCameraOff: true}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 59aa-0422-9bab
useWebRTC.ts:639 [useWebRTC] Renegotiation offer sent to: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:414 [useWebRTC] Answer processed successfully from: ec4ca0fd-dbec-4535-84c3-2623a18282cf
Controls.tsx:58 [Controls] Toggling video: {oldValue: false, newValue: true}
mediaStore.ts:229 [mediaStore] toggleVideo: {from: false, to: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoTracksCount: 1}
mediaStore.ts:237 [mediaStore] Setting video track enabled: {trackId: '135b0eca-ba22-45c3-a052-eb260dac27ef', label: 'USB2.0 HD UVC WebCam (2b7e:b685)', enabled: true, readyState: 'live'}
socket.ts:150 [SocketService] toggleCamera: {roomSlug: '59aa-0422-9bab', isCameraOff: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
RoomPage.tsx:64 [RoomPage] Loading room data for slug: 59aa-0422-9bab
RoomPage.tsx:177 [RoomPage] Updating local participant: {streamChanged: false, audioChanged: false, videoChanged: true, screenChanged: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
api.ts:58 [apiService] Request interceptor - token: present
mediaStore.ts:259 [mediaStore] Updating localParticipant videoEnabled: true
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:615 [useWebRTC] Stream update triggered, renegotiating all connections
useWebRTC.ts:632 [useWebRTC] Renegotiating connection for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 59aa-0422-9bab
useWebRTC.ts:639 [useWebRTC] Renegotiation offer sent to: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', roomSlug: '59aa-0422-9bab', isCameraOff: false}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', roomSlug: '59aa-0422-9bab', isCameraOff: false}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:414 [useWebRTC] Answer processed successfully from: ec4ca0fd-dbec-4535-84c3-2623a18282cf
RoomPage.tsx:68 [RoomPage] Room data loaded: {id: '67253170-b011-482f-9cc4-3808f07e6fce', slug: '59aa-0422-9bab', name: 'афываыфав', hasLobby: false, maxParticipants: 50, …}
RoomPage.tsx:73 [RoomPage] Current media stream state: {hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoTracks: 1, audioTracks: 1}
RoomPage.tsx:107 [RoomPage] Using existing media stream: a5f0ada2-3871-4909-bdc3-17417daeed6c
RoomPage.tsx:110 [RoomPage] Joining room via socket...
RoomPage.tsx:115 [RoomPage] LocalStream ready, joining room with media: {streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoTracks: 1, audioTracks: 1}
useSocket.ts:220 [useSocket] joinRoom called for: 59aa-0422-9bab {audioEnabled: true, videoEnabled: false, isMuted: false, isCameraOff: true}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:530 [useWebRTC] Updating screen share in all peer connections, screenSharing: false
useWebRTC.ts:561 [useWebRTC] Renegotiating after screen share change for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:615 [useWebRTC] Stream update triggered, renegotiating all connections
useWebRTC.ts:632 [useWebRTC] Renegotiating connection for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 59aa-0422-9bab
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 59aa-0422-9bab
useWebRTC.ts:639 [useWebRTC] Renegotiation offer sent to: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:228 [useSocket] joinRoom callback response: {success: true}
RoomPage.tsx:127 [RoomPage] Successfully joined room
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '59aa-0422-9bab', participants: Array(2)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:48 [useSocket] Detected reconnect - clearing old participants and WebRTC connections
useSocket.ts:59 [useSocket] Processing participants: 2
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', audioEnabled: true, videoEnabled: true, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: true}
useSocket.ts:105 [useSocket] Adding participant: вфафыа ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:123 [useSocket] Participants added. Total: 1
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '59aa-0422-9bab', participants: Array(2)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:48 [useSocket] Detected reconnect - clearing old participants and WebRTC connections
useSocket.ts:59 [useSocket] Processing participants: 2
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', audioEnabled: true, videoEnabled: true, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: true}
useSocket.ts:105 [useSocket] Adding participant: вфафыа ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:123 [useSocket] Participants added. Total: 1
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useSocket.ts:152 [useSocket] Request to create offers for participants: (2) [{…}, {…}]
useSocket.ts:152 [useSocket] Request to create offers for participants: (2) [{…}, {…}]
RoomPage.tsx:68 [RoomPage] Room data loaded: {id: '67253170-b011-482f-9cc4-3808f07e6fce', slug: '59aa-0422-9bab', name: 'афываыфав', hasLobby: false, maxParticipants: 50, …}
RoomPage.tsx:73 [RoomPage] Current media stream state: {hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoTracks: 1, audioTracks: 1}
RoomPage.tsx:107 [RoomPage] Using existing media stream: a5f0ada2-3871-4909-bdc3-17417daeed6c
RoomPage.tsx:110 [RoomPage] Joining room via socket...
RoomPage.tsx:115 [RoomPage] LocalStream ready, joining room with media: {streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoTracks: 1, audioTracks: 1}
useSocket.ts:220 [useSocket] joinRoom called for: 59aa-0422-9bab {audioEnabled: true, videoEnabled: true, isMuted: false, isCameraOff: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:530 [useWebRTC] Updating screen share in all peer connections, screenSharing: false
useWebRTC.ts:615 [useWebRTC] Stream update triggered, renegotiating all connections
useWebRTC.ts:628 [useWebRTC] Skipping renegotiation - signaling state not stable: ec4ca0fd-dbec-4535-84c3-2623a18282cf have-local-offer
useSocket.ts:228 [useSocket] joinRoom callback response: {success: true}
RoomPage.tsx:127 [RoomPage] Successfully joined room
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '59aa-0422-9bab', participants: Array(2)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:48 [useSocket] Detected reconnect - clearing old participants and WebRTC connections
useSocket.ts:59 [useSocket] Processing participants: 2
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', audioEnabled: true, videoEnabled: true, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: true}
useSocket.ts:105 [useSocket] Adding participant: вфафыа ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:123 [useSocket] Participants added. Total: 1
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '59aa-0422-9bab', participants: Array(2)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:48 [useSocket] Detected reconnect - clearing old participants and WebRTC connections
useSocket.ts:59 [useSocket] Processing participants: 2
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', audioEnabled: true, videoEnabled: true, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: true}
useSocket.ts:105 [useSocket] Adding participant: вфафыа ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:123 [useSocket] Participants added. Total: 1
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '59aa-0422-9bab', localStreamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useSocket.ts:152 [useSocket] Request to create offers for participants: (2) [{…}, {…}]
useSocket.ts:152 [useSocket] Request to create offers for participants: (2) [{…}, {…}]
useWebRTC.ts:414 [useWebRTC] Answer processed successfully from: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:242 [useSocket] Leaving room and stopping media streams
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: 'a5f0ada2-3871-4909-bdc3-17417daeed6c', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:468 [useWebRTC] Not creating offers - room: true localStream: false
RoomPage.tsx:196 [RoomPage] Cleaning up - clearing room state and stopping media streams
api.ts:39 [apiService] setToken called with: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImE3YWZjMzJkLTNkMjYtNDIyYS1iZjI0LTBmMWJiZTM1ZWZmNCIsImVtYWlsIjoiZ3Vlc3QtMzAwNWYxYjgtNTIwZS00ZWNlLWI1OGEtNWRkZmY4ZmIwNjk5QHZpZGVvbWVldC5sb2NhbCIsInJvbGUiOiJVU0VSIiwidG9rZW5WZXJzaW9uIjowLCJpYXQiOjE3NzE1MTk2MTIsImV4cCI6MTc3MTUyMDUxMn0.z-5wKH66rWX32oY2jVeOm5xT1JJT4f28rc_dhLrwOVQ
api.ts:58 [apiService] Request interceptor - token: present
authStore.ts:174 [authStore] Auth check successful
HomePage.tsx:47 Creating room with token: present
api.ts:58 [apiService] Request interceptor - token: present
api.ts:162 [apiService] createRoom response: {success: true, data: {…}, message: 'Комната успешно создана'}
ProtectedRoute.tsx:20 [ProtectedRoute] isAuthenticated: true isLoading: false user: {id: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', email: 'guest-3005f1b8-520e-4ece-b58a-5ddff8fb0699@videomeet.local', avatarUrl: null, role: 'USER', …}
api.ts:58 [apiService] Request interceptor - token: present
LobbyPage.tsx:43 [LobbyPage] Re-enabling media, keeping previous settings: {audioEnabled: true, videoEnabled: true}
mediaStore.ts:138 [mediaStore] Setting new local stream: 59d523cf-16c9-4ac4-a58a-06eda8c33867
mediaStore.ts:146 [mediaStore] Applying enabled state to stream tracks: {audioEnabled: true, videoEnabled: true, audioTracks: 1, videoTracks: 1}
mediaStore.ts:154 [mediaStore] Setting audio track enabled: {trackId: 'd15127e8-d711-495a-9aae-42f2da7ad056', enabled: true, prevEnabled: true}
mediaStore.ts:163 [mediaStore] Setting video track enabled: {trackId: '072bb778-c496-4590-9df7-de0392efbf13', label: 'USB2.0 HD UVC WebCam (2b7e:b685)', enabled: true, prevEnabled: true}
mediaStore.ts:172 [mediaStore] Stream tracks configured with enabled state
LobbyPage.tsx:58 [LobbyPage] Local stream initialized: 59d523cf-16c9-4ac4-a58a-06eda8c33867
LobbyPage.tsx:96 [LobbyPage] Attaching stream to video element
LobbyPage.tsx:122 [LobbyPage] Joining room, current stream: 59d523cf-16c9-4ac4-a58a-06eda8c33867
ProtectedRoute.tsx:20 [ProtectedRoute] isAuthenticated: true isLoading: false user: {id: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', email: 'guest-3005f1b8-520e-4ece-b58a-5ddff8fb0699@videomeet.local', avatarUrl: null, role: 'USER', …}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
useSocket.ts:32 [useSocket] Setting up event listeners. Room: undefined User: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useWebRTC.ts:468 [useWebRTC] Not creating offers - room: false localStream: true
RoomPage.tsx:64 [RoomPage] Loading room data for slug: 9e9d-b8f5-3fed
RoomPage.tsx:165 [RoomPage] Waiting for room:joined event to create localParticipant
api.ts:58 [apiService] Request interceptor - token: present
api.ts:58 [apiService] Request interceptor - token: present
RoomPage.tsx:68 [RoomPage] Room data loaded: {id: 'f3317b9d-3071-4f3e-94cd-712520c4ac97', slug: '9e9d-b8f5-3fed', name: 'ыфваыа', hasLobby: false, maxParticipants: 50, …}
RoomPage.tsx:73 [RoomPage] Current media stream state: {hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracks: 1, audioTracks: 1}
RoomPage.tsx:107 [RoomPage] Using existing media stream: 59d523cf-16c9-4ac4-a58a-06eda8c33867
RoomPage.tsx:110 [RoomPage] Joining room via socket...
RoomPage.tsx:115 [RoomPage] LocalStream ready, joining room with media: {streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracks: 1, audioTracks: 1}
useSocket.ts:220 [useSocket] joinRoom called for: 9e9d-b8f5-3fed {audioEnabled: true, videoEnabled: true, isMuted: false, isCameraOff: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 0, existingConnectionsCount: 0}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
api.ts:58 [apiService] Request interceptor - token: present
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: true}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 0, existingConnectionsCount: 0}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useSocket.ts:228 [useSocket] joinRoom callback response: {success: true}
RoomPage.tsx:127 [RoomPage] Successfully joined room
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '9e9d-b8f5-3fed', participants: Array(1)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:59 [useSocket] Processing participants: 1
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', audioEnabled: true, videoEnabled: true, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: true}
useSocket.ts:123 [useSocket] Participants added. Total: 0
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: true}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 0, totalParticipants: 1}
VideoGrid.tsx:38 [VideoGrid] All participants: [{…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:39 [VideoTile] Attaching stream to video element: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracks: 1, audioTracks: 1}
VideoTile.tsx:56 [VideoTile] Video track state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', trackEnabled: true, trackReadyState: 'live', participantVideoEnabled: true}
VideoTile.tsx:67 [VideoTile] Audio track state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', trackEnabled: true, trackReadyState: 'live'}
useSocket.ts:32 [useSocket] Setting up event listeners. Room: 9e9d-b8f5-3fed User: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 0, existingConnectionsCount: 0}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: true}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 0, totalParticipants: 1}
VideoGrid.tsx:38 [VideoGrid] All participants: [{…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 0, existingConnectionsCount: 0}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
RoomPage.tsx:45 [RoomPage] Using default ICE servers from config
useSocket.ts:152 [useSocket] Request to create offers for participants: [{…}]
useSocket.ts:152 [useSocket] Request to create offers for participants: [{…}]
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: true}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 0, totalParticipants: 1}
VideoGrid.tsx:38 [VideoGrid] All participants: [{…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 0, existingConnectionsCount: 0}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useChat.ts:35 [useChat] Loaded history for room: 9e9d-b8f5-3fed messages: 0
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 0, totalParticipants: 1}
VideoGrid.tsx:38 [VideoGrid] All participants: [{…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 0, existingConnectionsCount: 0}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useSocket.ts:130 [useSocket] User joined: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', avatarUrl: null, isMuted: false, isCameraOff: false, …}
useSocket.ts:130 [useSocket] User joined: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', avatarUrl: null, isMuted: false, isCameraOff: false, …}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: true, hasVideoTrack: false, shouldShowVideo: undefined, …}
VideoTile.tsx:74 [VideoTile] No stream available: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasVideoRef: true}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 0}
useWebRTC.ts:494 [useWebRTC] Creating offer for new participant: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:268 [useWebRTC] Creating offer for user: ec4ca0fd-dbec-4535-84c3-2623a18282cf {hasLocalStream: true, localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', hasRoom: true}
useWebRTC.ts:55 [useWebRTC] Creating new peer connection for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {hasLocalStream: true, localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracks: 1, audioTracks: 1}
useWebRTC.ts:66 [useWebRTC] Adding local tracks to peer connection: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', tracksCount: 2}
useWebRTC.ts:72 [useWebRTC] Adding track: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', trackKind: 'audio', trackId: 'd15127e8-d711-495a-9aae-42f2da7ad056', trackEnabled: true, trackReadyState: 'live'}
useWebRTC.ts:72 [useWebRTC] Adding track: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', trackKind: 'video', trackId: '072bb778-c496-4590-9df7-de0392efbf13', trackEnabled: true, trackReadyState: 'live'}
useWebRTC.ts:81 [useWebRTC] Added local tracks to peer connection for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:283 [useWebRTC] Peer connection senders before offer: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', sendersCount: 2, senders: Array(2)}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:296 [useWebRTC] Offer created: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', type: 'offer', hasVideo: true, hasAudio: true, sdpLines: 178}
useWebRTC.ts:309 [useWebRTC] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 9e9d-b8f5-3fed
useWebRTC.ts:231 [useWebRTC] ICE gathering state for ec4ca0fd-dbec-4535-84c3-2623a18282cf: gathering
useWebRTC.ts:164 [useWebRTC] ICE connection state for ec4ca0fd-dbec-4535-84c3-2623a18282cf: checking
useWebRTC.ts:122 [useWebRTC] PeerConnection state for ec4ca0fd-dbec-4535-84c3-2623a18282cf: connecting
useWebRTC.ts:164 [useWebRTC] ICE connection state for ec4ca0fd-dbec-4535-84c3-2623a18282cf: connected
useWebRTC.ts:191 [useWebRTC] ICE connection established for ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:414 [useWebRTC] Answer processed successfully from: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:441 [useWebRTC] ICE candidate added from: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:231 [useWebRTC] ICE gathering state for ec4ca0fd-dbec-4535-84c3-2623a18282cf: complete
useWebRTC.ts:122 [useWebRTC] PeerConnection state for ec4ca0fd-dbec-4535-84c3-2623a18282cf: connected
useWebRTC.ts:125 [useWebRTC] Successfully connected to ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', roomSlug: '9e9d-b8f5-3fed', isCameraOff: true}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', roomSlug: '9e9d-b8f5-3fed', isCameraOff: true}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', roomSlug: '9e9d-b8f5-3fed', isScreenSharing: true}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', roomSlug: '9e9d-b8f5-3fed', isScreenSharing: true}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:323 [useWebRTC] Received offer from: ec4ca0fd-dbec-4535-84c3-2623a18282cf {hasLocalStream: true, localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', offerType: 'offer', hasVideo: true, hasAudio: true}
useWebRTC.ts:44 [useWebRTC] ✅ Peer connection already exists and active for: ec4ca0fd-dbec-4535-84c3-2623a18282cf state: connected
useWebRTC.ts:95 [useWebRTC] ontrack event received: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', trackKind: 'video', trackId: '2eaac419-a20b-4b49-8320-fd94b051de91', trackEnabled: true, trackReadyState: 'live', …}
useWebRTC.ts:106 [useWebRTC] Received remote stream from: ec4ca0fd-dbec-4535-84c3-2623a18282cf {streamId: '870743e8-2468-48aa-9537-e9a836fb5285', videoTracks: 1, audioTracks: 0, videoTracksEnabled: Array(1), audioTracksEnabled: Array(0)}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: true, streamId: '870743e8-2468-48aa-9537-e9a836fb5285', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:39 [VideoTile] Attaching stream to video element: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', streamId: '870743e8-2468-48aa-9537-e9a836fb5285', videoTracks: 1, audioTracks: 0}
VideoTile.tsx:56 [VideoTile] Video track state: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', trackEnabled: true, trackReadyState: 'live', participantVideoEnabled: false}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:363 [useWebRTC] Answer created: {from: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', type: 'answer', hasVideo: true, hasAudio: true, senders: 2}
useWebRTC.ts:376 [useWebRTC] Sending answer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf
socket.ts:131 [SocketService] Sending answer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 9e9d-b8f5-3fed
Controls.tsx:58 [Controls] Toggling video: {oldValue: true, newValue: false}
mediaStore.ts:229 [mediaStore] toggleVideo: {from: true, to: false, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracksCount: 1}
mediaStore.ts:237 [mediaStore] Setting video track enabled: {trackId: '072bb778-c496-4590-9df7-de0392efbf13', label: 'USB2.0 HD UVC WebCam (2b7e:b685)', enabled: false, readyState: 'live'}
socket.ts:150 [SocketService] toggleCamera: {roomSlug: '9e9d-b8f5-3fed', isCameraOff: true}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: true, streamId: '870743e8-2468-48aa-9537-e9a836fb5285', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
RoomPage.tsx:64 [RoomPage] Loading room data for slug: 9e9d-b8f5-3fed
RoomPage.tsx:177 [RoomPage] Updating local participant: {streamChanged: false, audioChanged: false, videoChanged: true, screenChanged: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: true, streamId: '870743e8-2468-48aa-9537-e9a836fb5285', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
api.ts:58 [apiService] Request interceptor - token: present
mediaStore.ts:259 [mediaStore] Updating localParticipant videoEnabled: false
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: true, streamId: '870743e8-2468-48aa-9537-e9a836fb5285', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:615 [useWebRTC] Stream update triggered, renegotiating all connections
useWebRTC.ts:632 [useWebRTC] Renegotiating connection for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', roomSlug: '9e9d-b8f5-3fed', isCameraOff: true}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', roomSlug: '9e9d-b8f5-3fed', isCameraOff: true}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: true, streamId: '870743e8-2468-48aa-9537-e9a836fb5285', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 9e9d-b8f5-3fed
useWebRTC.ts:639 [useWebRTC] Renegotiation offer sent to: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:414 [useWebRTC] Answer processed successfully from: ec4ca0fd-dbec-4535-84c3-2623a18282cf
RoomPage.tsx:68 [RoomPage] Room data loaded: {id: 'f3317b9d-3071-4f3e-94cd-712520c4ac97', slug: '9e9d-b8f5-3fed', name: 'ыфваыа', hasLobby: false, maxParticipants: 50, …}
RoomPage.tsx:73 [RoomPage] Current media stream state: {hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracks: 1, audioTracks: 1}
RoomPage.tsx:107 [RoomPage] Using existing media stream: 59d523cf-16c9-4ac4-a58a-06eda8c33867
RoomPage.tsx:110 [RoomPage] Joining room via socket...
RoomPage.tsx:115 [RoomPage] LocalStream ready, joining room with media: {streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracks: 1, audioTracks: 1}
useSocket.ts:220 [useSocket] joinRoom called for: 9e9d-b8f5-3fed {audioEnabled: true, videoEnabled: false, isMuted: false, isCameraOff: true}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: true, streamId: '870743e8-2468-48aa-9537-e9a836fb5285', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:530 [useWebRTC] Updating screen share in all peer connections, screenSharing: false
useWebRTC.ts:561 [useWebRTC] Renegotiating after screen share change for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:615 [useWebRTC] Stream update triggered, renegotiating all connections
useWebRTC.ts:632 [useWebRTC] Renegotiating connection for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 9e9d-b8f5-3fed
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 9e9d-b8f5-3fed
useWebRTC.ts:639 [useWebRTC] Renegotiation offer sent to: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:228 [useSocket] joinRoom callback response: {success: true}
RoomPage.tsx:127 [RoomPage] Successfully joined room
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '9e9d-b8f5-3fed', participants: Array(2)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:48 [useSocket] Detected reconnect - clearing old participants and WebRTC connections
useSocket.ts:59 [useSocket] Processing participants: 2
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', audioEnabled: true, videoEnabled: false, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: false}
useSocket.ts:105 [useSocket] Adding participant: вфафыа ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:123 [useSocket] Participants added. Total: 1
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '9e9d-b8f5-3fed', participants: Array(2)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:48 [useSocket] Detected reconnect - clearing old participants and WebRTC connections
useSocket.ts:59 [useSocket] Processing participants: 2
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', audioEnabled: true, videoEnabled: false, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: false}
useSocket.ts:105 [useSocket] Adding participant: вфафыа ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:123 [useSocket] Participants added. Total: 1
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
VideoTile.tsx:74 [VideoTile] No stream available: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasVideoRef: true}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useSocket.ts:152 [useSocket] Request to create offers for participants: (2) [{…}, {…}]
useSocket.ts:152 [useSocket] Request to create offers for participants: (2) [{…}, {…}]
useWebRTC.ts:414 [useWebRTC] Answer processed successfully from: ec4ca0fd-dbec-4535-84c3-2623a18282cf
Controls.tsx:58 [Controls] Toggling video: {oldValue: false, newValue: true}
mediaStore.ts:229 [mediaStore] toggleVideo: {from: false, to: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracksCount: 1}
mediaStore.ts:237 [mediaStore] Setting video track enabled: {trackId: '072bb778-c496-4590-9df7-de0392efbf13', label: 'USB2.0 HD UVC WebCam (2b7e:b685)', enabled: true, readyState: 'live'}
socket.ts:150 [SocketService] toggleCamera: {roomSlug: '9e9d-b8f5-3fed', isCameraOff: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
RoomPage.tsx:64 [RoomPage] Loading room data for slug: 9e9d-b8f5-3fed
RoomPage.tsx:177 [RoomPage] Updating local participant: {streamChanged: false, audioChanged: false, videoChanged: true, screenChanged: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
api.ts:58 [apiService] Request interceptor - token: present
mediaStore.ts:259 [mediaStore] Updating localParticipant videoEnabled: true
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:615 [useWebRTC] Stream update triggered, renegotiating all connections
useWebRTC.ts:632 [useWebRTC] Renegotiating connection for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 9e9d-b8f5-3fed
useWebRTC.ts:639 [useWebRTC] Renegotiation offer sent to: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', roomSlug: '9e9d-b8f5-3fed', isCameraOff: false}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', roomSlug: '9e9d-b8f5-3fed', isCameraOff: false}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
RoomPage.tsx:68 [RoomPage] Room data loaded: {id: 'f3317b9d-3071-4f3e-94cd-712520c4ac97', slug: '9e9d-b8f5-3fed', name: 'ыфваыа', hasLobby: false, maxParticipants: 50, …}
RoomPage.tsx:73 [RoomPage] Current media stream state: {hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracks: 1, audioTracks: 1}
RoomPage.tsx:107 [RoomPage] Using existing media stream: 59d523cf-16c9-4ac4-a58a-06eda8c33867
RoomPage.tsx:110 [RoomPage] Joining room via socket...
RoomPage.tsx:115 [RoomPage] LocalStream ready, joining room with media: {streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracks: 1, audioTracks: 1}
useSocket.ts:220 [useSocket] joinRoom called for: 9e9d-b8f5-3fed {audioEnabled: true, videoEnabled: true, isMuted: false, isCameraOff: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:530 [useWebRTC] Updating screen share in all peer connections, screenSharing: false
useWebRTC.ts:615 [useWebRTC] Stream update triggered, renegotiating all connections
useWebRTC.ts:628 [useWebRTC] Skipping renegotiation - signaling state not stable: ec4ca0fd-dbec-4535-84c3-2623a18282cf have-local-offer
useSocket.ts:228 [useSocket] joinRoom callback response: {success: true}
RoomPage.tsx:127 [RoomPage] Successfully joined room
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '9e9d-b8f5-3fed', participants: Array(2)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:48 [useSocket] Detected reconnect - clearing old participants and WebRTC connections
useSocket.ts:59 [useSocket] Processing participants: 2
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', audioEnabled: true, videoEnabled: true, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: true}
useSocket.ts:105 [useSocket] Adding participant: вфафыа ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:123 [useSocket] Participants added. Total: 1
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '9e9d-b8f5-3fed', participants: Array(2)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:48 [useSocket] Detected reconnect - clearing old participants and WebRTC connections
useSocket.ts:59 [useSocket] Processing participants: 2
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', audioEnabled: true, videoEnabled: true, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: true}
useSocket.ts:105 [useSocket] Adding participant: вфафыа ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:123 [useSocket] Participants added. Total: 1
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useSocket.ts:152 [useSocket] Request to create offers for participants: (2) [{…}, {…}]
useSocket.ts:152 [useSocket] Request to create offers for participants: (2) [{…}, {…}]
useWebRTC.ts:414 [useWebRTC] Answer processed successfully from: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', roomSlug: '9e9d-b8f5-3fed', isScreenSharing: false}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', roomSlug: '9e9d-b8f5-3fed', isScreenSharing: false}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:323 [useWebRTC] Received offer from: ec4ca0fd-dbec-4535-84c3-2623a18282cf {hasLocalStream: true, localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', offerType: 'offer', hasVideo: true, hasAudio: true}
useWebRTC.ts:44 [useWebRTC] ✅ Peer connection already exists and active for: ec4ca0fd-dbec-4535-84c3-2623a18282cf state: connected
useWebRTC.ts:363 [useWebRTC] Answer created: {from: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', type: 'answer', hasVideo: true, hasAudio: true, senders: 2}
useWebRTC.ts:376 [useWebRTC] Sending answer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf
socket.ts:131 [SocketService] Sending answer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 9e9d-b8f5-3fed
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', roomSlug: '9e9d-b8f5-3fed', isCameraOff: true}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', roomSlug: '9e9d-b8f5-3fed', isCameraOff: true}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
Controls.tsx:58 [Controls] Toggling video: {oldValue: true, newValue: false}
mediaStore.ts:229 [mediaStore] toggleVideo: {from: true, to: false, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracksCount: 1}
mediaStore.ts:237 [mediaStore] Setting video track enabled: {trackId: '072bb778-c496-4590-9df7-de0392efbf13', label: 'USB2.0 HD UVC WebCam (2b7e:b685)', enabled: false, readyState: 'live'}
socket.ts:150 [SocketService] toggleCamera: {roomSlug: '9e9d-b8f5-3fed', isCameraOff: true}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
RoomPage.tsx:64 [RoomPage] Loading room data for slug: 9e9d-b8f5-3fed
RoomPage.tsx:177 [RoomPage] Updating local participant: {streamChanged: false, audioChanged: false, videoChanged: true, screenChanged: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
api.ts:58 [apiService] Request interceptor - token: present
mediaStore.ts:259 [mediaStore] Updating localParticipant videoEnabled: false
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:615 [useWebRTC] Stream update triggered, renegotiating all connections
useWebRTC.ts:632 [useWebRTC] Renegotiating connection for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', roomSlug: '9e9d-b8f5-3fed', isCameraOff: true}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', roomSlug: '9e9d-b8f5-3fed', isCameraOff: true}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 9e9d-b8f5-3fed
useWebRTC.ts:639 [useWebRTC] Renegotiation offer sent to: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:414 [useWebRTC] Answer processed successfully from: ec4ca0fd-dbec-4535-84c3-2623a18282cf
RoomPage.tsx:68 [RoomPage] Room data loaded: {id: 'f3317b9d-3071-4f3e-94cd-712520c4ac97', slug: '9e9d-b8f5-3fed', name: 'ыфваыа', hasLobby: false, maxParticipants: 50, …}
RoomPage.tsx:73 [RoomPage] Current media stream state: {hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracks: 1, audioTracks: 1}
RoomPage.tsx:107 [RoomPage] Using existing media stream: 59d523cf-16c9-4ac4-a58a-06eda8c33867
RoomPage.tsx:110 [RoomPage] Joining room via socket...
RoomPage.tsx:115 [RoomPage] LocalStream ready, joining room with media: {streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracks: 1, audioTracks: 1}
useSocket.ts:220 [useSocket] joinRoom called for: 9e9d-b8f5-3fed {audioEnabled: true, videoEnabled: false, isMuted: false, isCameraOff: true}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:530 [useWebRTC] Updating screen share in all peer connections, screenSharing: false
useWebRTC.ts:561 [useWebRTC] Renegotiating after screen share change for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:615 [useWebRTC] Stream update triggered, renegotiating all connections
useWebRTC.ts:632 [useWebRTC] Renegotiating connection for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 9e9d-b8f5-3fed
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 9e9d-b8f5-3fed
useWebRTC.ts:639 [useWebRTC] Renegotiation offer sent to: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:228 [useSocket] joinRoom callback response: {success: true}
RoomPage.tsx:127 [RoomPage] Successfully joined room
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '9e9d-b8f5-3fed', participants: Array(2)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:48 [useSocket] Detected reconnect - clearing old participants and WebRTC connections
useSocket.ts:59 [useSocket] Processing participants: 2
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', audioEnabled: true, videoEnabled: false, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: false}
useSocket.ts:105 [useSocket] Adding participant: вфафыа ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:123 [useSocket] Participants added. Total: 1
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '9e9d-b8f5-3fed', participants: Array(2)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:48 [useSocket] Detected reconnect - clearing old participants and WebRTC connections
useSocket.ts:59 [useSocket] Processing participants: 2
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', audioEnabled: true, videoEnabled: false, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: false}
useSocket.ts:105 [useSocket] Adding participant: вфафыа ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:123 [useSocket] Participants added. Total: 1
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useSocket.ts:152 [useSocket] Request to create offers for participants: (2) [{…}, {…}]
useSocket.ts:152 [useSocket] Request to create offers for participants: (2) [{…}, {…}]
useWebRTC.ts:414 [useWebRTC] Answer processed successfully from: ec4ca0fd-dbec-4535-84c3-2623a18282cf
Controls.tsx:58 [Controls] Toggling video: {oldValue: false, newValue: true}
mediaStore.ts:229 [mediaStore] toggleVideo: {from: false, to: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracksCount: 1}
mediaStore.ts:237 [mediaStore] Setting video track enabled: {trackId: '072bb778-c496-4590-9df7-de0392efbf13', label: 'USB2.0 HD UVC WebCam (2b7e:b685)', enabled: true, readyState: 'live'}
socket.ts:150 [SocketService] toggleCamera: {roomSlug: '9e9d-b8f5-3fed', isCameraOff: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
RoomPage.tsx:64 [RoomPage] Loading room data for slug: 9e9d-b8f5-3fed
RoomPage.tsx:177 [RoomPage] Updating local participant: {streamChanged: false, audioChanged: false, videoChanged: true, screenChanged: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
api.ts:58 [apiService] Request interceptor - token: present
mediaStore.ts:259 [mediaStore] Updating localParticipant videoEnabled: true
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:615 [useWebRTC] Stream update triggered, renegotiating all connections
useWebRTC.ts:632 [useWebRTC] Renegotiating connection for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', roomSlug: '9e9d-b8f5-3fed', isCameraOff: false}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', roomSlug: '9e9d-b8f5-3fed', isCameraOff: false}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 9e9d-b8f5-3fed
useWebRTC.ts:639 [useWebRTC] Renegotiation offer sent to: ec4ca0fd-dbec-4535-84c3-2623a18282cf
RoomPage.tsx:68 [RoomPage] Room data loaded: {id: 'f3317b9d-3071-4f3e-94cd-712520c4ac97', slug: '9e9d-b8f5-3fed', name: 'ыфваыа', hasLobby: false, maxParticipants: 50, …}
RoomPage.tsx:73 [RoomPage] Current media stream state: {hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracks: 1, audioTracks: 1}
RoomPage.tsx:107 [RoomPage] Using existing media stream: 59d523cf-16c9-4ac4-a58a-06eda8c33867
RoomPage.tsx:110 [RoomPage] Joining room via socket...
RoomPage.tsx:115 [RoomPage] LocalStream ready, joining room with media: {streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracks: 1, audioTracks: 1}
useSocket.ts:220 [useSocket] joinRoom called for: 9e9d-b8f5-3fed {audioEnabled: true, videoEnabled: true, isMuted: false, isCameraOff: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:530 [useWebRTC] Updating screen share in all peer connections, screenSharing: false
useWebRTC.ts:615 [useWebRTC] Stream update triggered, renegotiating all connections
useWebRTC.ts:628 [useWebRTC] Skipping renegotiation - signaling state not stable: ec4ca0fd-dbec-4535-84c3-2623a18282cf have-local-offer
useSocket.ts:228 [useSocket] joinRoom callback response: {success: true}
RoomPage.tsx:127 [RoomPage] Successfully joined room
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '9e9d-b8f5-3fed', participants: Array(2)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:48 [useSocket] Detected reconnect - clearing old participants and WebRTC connections
useSocket.ts:59 [useSocket] Processing participants: 2
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', audioEnabled: true, videoEnabled: true, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: true}
useSocket.ts:105 [useSocket] Adding participant: вфафыа ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:123 [useSocket] Participants added. Total: 1
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '9e9d-b8f5-3fed', participants: Array(2)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:48 [useSocket] Detected reconnect - clearing old participants and WebRTC connections
useSocket.ts:59 [useSocket] Processing participants: 2
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', audioEnabled: true, videoEnabled: true, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: true}
useSocket.ts:105 [useSocket] Adding participant: вфафыа ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:123 [useSocket] Participants added. Total: 1
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useSocket.ts:152 [useSocket] Request to create offers for participants: (2) [{…}, {…}]
useSocket.ts:152 [useSocket] Request to create offers for participants: (2) [{…}, {…}]
useWebRTC.ts:414 [useWebRTC] Answer processed successfully from: ec4ca0fd-dbec-4535-84c3-2623a18282cf
Controls.tsx:58 [Controls] Toggling video: {oldValue: true, newValue: false}
mediaStore.ts:229 [mediaStore] toggleVideo: {from: true, to: false, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracksCount: 1}
mediaStore.ts:237 [mediaStore] Setting video track enabled: {trackId: '072bb778-c496-4590-9df7-de0392efbf13', label: 'USB2.0 HD UVC WebCam (2b7e:b685)', enabled: false, readyState: 'live'}
socket.ts:150 [SocketService] toggleCamera: {roomSlug: '9e9d-b8f5-3fed', isCameraOff: true}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
RoomPage.tsx:64 [RoomPage] Loading room data for slug: 9e9d-b8f5-3fed
RoomPage.tsx:177 [RoomPage] Updating local participant: {streamChanged: false, audioChanged: false, videoChanged: true, screenChanged: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
api.ts:58 [apiService] Request interceptor - token: present
mediaStore.ts:259 [mediaStore] Updating localParticipant videoEnabled: false
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:615 [useWebRTC] Stream update triggered, renegotiating all connections
useWebRTC.ts:632 [useWebRTC] Renegotiating connection for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', roomSlug: '9e9d-b8f5-3fed', isCameraOff: true}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', roomSlug: '9e9d-b8f5-3fed', isCameraOff: true}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 9e9d-b8f5-3fed
useWebRTC.ts:639 [useWebRTC] Renegotiation offer sent to: ec4ca0fd-dbec-4535-84c3-2623a18282cf
RoomPage.tsx:68 [RoomPage] Room data loaded: {id: 'f3317b9d-3071-4f3e-94cd-712520c4ac97', slug: '9e9d-b8f5-3fed', name: 'ыфваыа', hasLobby: false, maxParticipants: 50, …}
RoomPage.tsx:73 [RoomPage] Current media stream state: {hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracks: 1, audioTracks: 1}
RoomPage.tsx:107 [RoomPage] Using existing media stream: 59d523cf-16c9-4ac4-a58a-06eda8c33867
RoomPage.tsx:110 [RoomPage] Joining room via socket...
RoomPage.tsx:115 [RoomPage] LocalStream ready, joining room with media: {streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracks: 1, audioTracks: 1}
useSocket.ts:220 [useSocket] joinRoom called for: 9e9d-b8f5-3fed {audioEnabled: true, videoEnabled: false, isMuted: false, isCameraOff: true}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:530 [useWebRTC] Updating screen share in all peer connections, screenSharing: false
useWebRTC.ts:615 [useWebRTC] Stream update triggered, renegotiating all connections
useWebRTC.ts:628 [useWebRTC] Skipping renegotiation - signaling state not stable: ec4ca0fd-dbec-4535-84c3-2623a18282cf have-local-offer
useSocket.ts:228 [useSocket] joinRoom callback response: {success: true}
RoomPage.tsx:127 [RoomPage] Successfully joined room
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '9e9d-b8f5-3fed', participants: Array(2)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:48 [useSocket] Detected reconnect - clearing old participants and WebRTC connections
useSocket.ts:59 [useSocket] Processing participants: 2
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', audioEnabled: true, videoEnabled: false, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: false}
useSocket.ts:105 [useSocket] Adding participant: вфафыа ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:123 [useSocket] Participants added. Total: 1
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '9e9d-b8f5-3fed', participants: Array(2)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:48 [useSocket] Detected reconnect - clearing old participants and WebRTC connections
useSocket.ts:59 [useSocket] Processing participants: 2
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', audioEnabled: true, videoEnabled: false, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: false}
useSocket.ts:105 [useSocket] Adding participant: вфафыа ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:123 [useSocket] Participants added. Total: 1
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useSocket.ts:152 [useSocket] Request to create offers for participants: (2) [{…}, {…}]
useSocket.ts:152 [useSocket] Request to create offers for participants: (2) [{…}, {…}]
useWebRTC.ts:414 [useWebRTC] Answer processed successfully from: ec4ca0fd-dbec-4535-84c3-2623a18282cf
Controls.tsx:58 [Controls] Toggling video: {oldValue: false, newValue: true}
mediaStore.ts:229 [mediaStore] toggleVideo: {from: false, to: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracksCount: 1}
mediaStore.ts:237 [mediaStore] Setting video track enabled: {trackId: '072bb778-c496-4590-9df7-de0392efbf13', label: 'USB2.0 HD UVC WebCam (2b7e:b685)', enabled: true, readyState: 'live'}
socket.ts:150 [SocketService] toggleCamera: {roomSlug: '9e9d-b8f5-3fed', isCameraOff: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: false, hasVideoTrack: true, shouldShowVideo: false, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
RoomPage.tsx:64 [RoomPage] Loading room data for slug: 9e9d-b8f5-3fed
RoomPage.tsx:177 [RoomPage] Updating local participant: {streamChanged: false, audioChanged: false, videoChanged: true, screenChanged: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
api.ts:58 [apiService] Request interceptor - token: present
mediaStore.ts:259 [mediaStore] Updating localParticipant videoEnabled: true
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:615 [useWebRTC] Stream update triggered, renegotiating all connections
useWebRTC.ts:632 [useWebRTC] Renegotiating connection for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 9e9d-b8f5-3fed
useWebRTC.ts:639 [useWebRTC] Renegotiation offer sent to: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', roomSlug: '9e9d-b8f5-3fed', isCameraOff: false}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
useSocket.ts:167 [useSocket] Received media:control event (raw): {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', roomSlug: '9e9d-b8f5-3fed', isCameraOff: false}
useSocket.ts:181 [useSocket] Updating participant media state: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', updates: {…}}
useSocket.ts:188 [useSocket] Participant media state updated successfully
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:414 [useWebRTC] Answer processed successfully from: ec4ca0fd-dbec-4535-84c3-2623a18282cf
RoomPage.tsx:68 [RoomPage] Room data loaded: {id: 'f3317b9d-3071-4f3e-94cd-712520c4ac97', slug: '9e9d-b8f5-3fed', name: 'ыфваыа', hasLobby: false, maxParticipants: 50, …}
RoomPage.tsx:73 [RoomPage] Current media stream state: {hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracks: 1, audioTracks: 1}
RoomPage.tsx:107 [RoomPage] Using existing media stream: 59d523cf-16c9-4ac4-a58a-06eda8c33867
RoomPage.tsx:110 [RoomPage] Joining room via socket...
RoomPage.tsx:115 [RoomPage] LocalStream ready, joining room with media: {streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoTracks: 1, audioTracks: 1}
useSocket.ts:220 [useSocket] joinRoom called for: 9e9d-b8f5-3fed {audioEnabled: true, videoEnabled: true, isMuted: false, isCameraOff: false}
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useWebRTC.ts:530 [useWebRTC] Updating screen share in all peer connections, screenSharing: false
useWebRTC.ts:561 [useWebRTC] Renegotiating after screen share change for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useWebRTC.ts:615 [useWebRTC] Stream update triggered, renegotiating all connections
useWebRTC.ts:632 [useWebRTC] Renegotiating connection for: ec4ca0fd-dbec-4535-84c3-2623a18282cf
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 9e9d-b8f5-3fed
socket.ts:126 [SocketService] Sending offer to: ec4ca0fd-dbec-4535-84c3-2623a18282cf in room: 9e9d-b8f5-3fed
useWebRTC.ts:639 [useWebRTC] Renegotiation offer sent to: ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:228 [useSocket] joinRoom callback response: {success: true}
RoomPage.tsx:127 [RoomPage] Successfully joined room
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '9e9d-b8f5-3fed', participants: Array(2)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:48 [useSocket] Detected reconnect - clearing old participants and WebRTC connections
useSocket.ts:59 [useSocket] Processing participants: 2
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', audioEnabled: true, videoEnabled: true, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: true}
useSocket.ts:105 [useSocket] Adding participant: вфафыа ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:123 [useSocket] Participants added. Total: 1
useSocket.ts:39 [useSocket] Room joined event received: {roomSlug: '9e9d-b8f5-3fed', participants: Array(2)}
useSocket.ts:40 [useSocket] Current user ID: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:43 [useSocket] Current socketId: x27WP6pv3riSFQaHAAAF
useSocket.ts:48 [useSocket] Detected reconnect - clearing old participants and WebRTC connections
useSocket.ts:59 [useSocket] Processing participants: 2
useSocket.ts:64 [useSocket] Creating localParticipant for self: a7afc32d-3d26-422a-bf24-0f1bbe35eff4
useSocket.ts:68 [useSocket] Media state: {hasLocalStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', audioEnabled: true, videoEnabled: true, videoTracks: 1, …}
useSocket.ts:95 [useSocket] Setting localParticipant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, audioEnabled: true, videoEnabled: true}
useSocket.ts:105 [useSocket] Adding participant: вфафыа ec4ca0fd-dbec-4535-84c3-2623a18282cf
useSocket.ts:123 [useSocket] Participants added. Total: 1
RoomPage.tsx:30 [RoomPage] Chat state: {messagesCount: 0, isChatOpen: false, isChatLoading: false}
useWebRTC.ts:32 [useWebRTC] RTCConfiguration: {iceServersCount: 1, iceServers: Array(1), iceCandidatePoolSize: 10}
VideoGrid.tsx:13 [VideoGrid] Rendering: {hasLocalParticipant: true, localParticipantStream: '59d523cf-16c9-4ac4-a58a-06eda8c33867', remoteParticipantsCount: 1, totalParticipants: 2}
VideoGrid.tsx:38 [VideoGrid] All participants: (2) [{…}, {…}]
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', displayName: 'Фываыаы', hasStream: true, streamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', videoEnabled: true, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'a7afc32d-3d26-422a-bf24-0f1bbe35eff4', hasStream: true, videoEnabled: true, hasVideoTrack: true, shouldShowVideo: true, …}
VideoTile.tsx:20 [VideoTile] Rendering participant: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', displayName: 'вфафыа', hasStream: false, streamId: undefined, videoEnabled: false, …}
VideoTile.tsx:87 [VideoTile] Video visibility decision: {userId: 'ec4ca0fd-dbec-4535-84c3-2623a18282cf', hasStream: false, videoEnabled: false, hasVideoTrack: false, shouldShowVideo: undefined, …}
useWebRTC.ts:472 [useWebRTC] ===== Participants/Stream changed, checking connections =====
useWebRTC.ts:473 [useWebRTC] Current state: {roomSlug: '9e9d-b8f5-3fed', localStreamId: '59d523cf-16c9-4ac4-a58a-06eda8c33867', participantsCount: 1, existingConnectionsCount: 1}
useWebRTC.ts:515 [useWebRTC] Peer connection OK for: ec4ca0fd-dbec-4535-84c3-2623a18282cf {connectionState: 'connected', iceConnectionState: 'connected'}
useWebRTC.ts:522 [useWebRTC] ===== Connections check complete =====
useSocket.ts:152 [useSocket] Request to create offers for participants: (2) [{…}, {…}]
useSocket.ts:152 [useSocket] Request to create offers for participants: (2) [{…}, {…}]
useWebRTC.ts:414 [useWebRTC] Answer processed successfully from: ec4ca0fd-dbec-4535-84c3-2623a18282cf
